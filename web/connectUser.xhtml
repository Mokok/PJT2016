<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Script connection with google login-->
        <!--<script src="https://apis.google.com/js/platform.js" async="" defer=""></script>
        <meta name="google-signin-client_id" content="1029998334329-7i6jhe796qua6dg57pmenecujg60aeti.apps.googleusercontent.com"/>
        -->
        <link href="resources/css/user.css" rel="stylesheet" type="text/css"/>
        <title>Connecter un utilisateur</title>
    </h:head>
    <h:body>
        <div id="userBloc">
            <div class="g-signin2" data-onsuccess="onSignIn"></div>
            <h:form>
                <h:panelGroup id="blockUsername" class="form-group #{connectUserBean.successBlock.get(0)}" layout="block">
                    <label class="control-label">Nom d'utilisateur</label>
                    <h:inputText class="form-control" value="#{connectUserBean.user.username}" required="false">
                        <f:ajax event="blur" render="usernameMessage blockUsername"/>
                    </h:inputText>
                    <h:outputLabel id="usernameMessage" class="control-label message">#{connectUserBean.errorMessage.get(0)}</h:outputLabel>
                </h:panelGroup>
                
                <h:panelGroup id="blockPassword" class="form-group #{connectUserBean.successBlock.get(1)}" layout="block">
                    <label class="control-label">Mot de passe</label>
                    <h:inputSecret class="form-control" value="#{connectUserBean.user.password}" required="false" redisplay="true">
                        <f:ajax event="blur" render="passwordMessage blockPassword"/>
                    </h:inputSecret>
                    <h:outputLabel id="passwordMessage" class="control-label message">#{connectUserBean.errorMessage.get(1)}</h:outputLabel>
                </h:panelGroup>
                
                <h:commandButton class="btn btn-primary" value="Connectez vous" action="#{connectUserBean.connectUser()}">
                    <f:ajax render="blockUsername usernameMessage blockPassword passwordMessage"/>
                </h:commandButton>
            </h:form>
        </div>
        <br />
        <h:link outcome="welcomePrimefaces" value="Primefaces welcome page" />
        <!--<script>
            function onSignIn(googleUser) {
                var profile = googleUser.getBasicProfile();
                console.log('ID: ' + profile.getId); // Do not send to your backend! Use an ID token instead.
                console.log('Name: ' + profile.getName());
                console.log('Image URL: ' + profile.getImageUrl());
                console.log('Email: ' + profile.getEmail());
                
            }
        </script>
        -->
    </h:body>
</html>

